<ng-include src="'templates/header.html'"></ng-include>
<div ng-if="visible" ng-cloak>
	<div class="well">
		<div class="panel panel-default companyPanel">
			<div class="panel-heading">
			   <span class="panel-title">Companies</span>
			   <button ng-if="canEdit" class="btn btn-success" data-toggle="modal" data-target="#newCompanyModal" >
					<span class="glyphicon glyphicon-plus"></span>  ADD
				</button>
			</div>
	  		<div class="panel-body ">
	  			<div class="company" ng-repeat=" company in companies">
					<a ng-href="#/company/{{company.company_id}}"><button ng-if="canEdit" class="btn companyBtn btn-primary ">
						{{company.name}}
					</button></a>
					<a ng-href="#/company/{{company.company_id}}"><button ng-if="!canEdit" class="btn companyBtnCantEdit btn-primary ">
						{{company.name}}
					</button></a>
					<button ng-if="canEdit" type="button" ng-click="deleteCompany(company.company_id)" class="btn btn-default" aria-label="Left Align">
					  <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
					</button>
				</div>
				<div class="alert alert-danger" ng-if="!companies.length">
					Companies list is empty
				</div>
				<div id="newCompanyModal" class="modal fade" role="dialog">
					<div class="modal-dialog">
						<div class="modal-content">
						    <div class="modal-header">
						        <button type="button" class="close" data-dismiss="modal">&times;</button>
						        <h4 class="modal-title">Add new company</h4>
						    </div>
						    <div class="modal-body">
								<form class="form-horizontal" ng-submit="addNewCompany()">
								  <div class="form-group">
								    <label for="name" class="col-sm-2 control-label">Name</label>
								    <div class="col-sm-10">
								    	<div class="input-group">
										  <span class="input-group-addon" id="name-addon">
										  	<span class="glyphicon glyphicon-briefcase"></span>
										  </span>
										  <input type="text" ng-change="makeValid()" required class="form-control" id="name" aria-describedby="name-addon" ng-model="newCompany.name" placeholder="name">
										</div>
										 <div class="errorDiv" ng-if="nameError">Company name is already taken.</div>
								    </div>
								  </div>
								  <div class="form-group">
								    <label for="date" class="col-sm-2 control-label">Date</label>
								    <div class="col-sm-10">
								    	<div class="input-group">
											<span class="input-group-addon" id="date-addon">
											  	<span class="glyphicon glyphicon glyphicon-calendar"></span>
											  </span>
									      	<input type="date" required class="form-control" id="date" aria-describedby="date-addon" ng-model="newCompany.date" placeholder="date">
								      	</div>
								    </div>
								  </div>
								  <div class="form-group">
								    <label for="description" class="col-sm-2 control-label">Description</label>
								    <div class="col-sm-10">
								      <textarea class="form-control" required ng-model="newCompany.description" rows="3"></textarea>
								    </div>
								  </div>
								  <div class="form-group">
								    <div class="col-sm-offset-2 col-sm-10">
								      <button type="submit" class="btn btn-primary">Add company</button>
								    </div>
								  </div>
								</form>
						    </div>
						    <div class="modal-footer">
						        <button type="button" class="closeModal btn btn-default" data-dismiss="modal">Close</button>
						    </div>
						</div>
					</div>
				</div>
	  		</div>
		</div>
	</div>
</div>